#include "widgets/Utilities.h"
#include "savefiles.h"
#include "widgets/handler.h"
#include "widgets/WidgetChild8.h"
extern struct WidgetMenuChild;
class WidgetContPakData : public WidgetMenu{
    public:
    SaveDatPointers saveDatsP[16];
    WidgetMenuChild *unk27c;
    BaseWidget *field3_0x280;
    ulong (*funcA)(void);
    ulong (*funcB)(void);
    u8 OtherState;
    u8 pfsErr;
    u8 saveSlot;
    u8 AidynSaveSlots;
    undefined field10_0x290;
    undefined field11_0x291;
    u16 unk292;
    u16 unk294;
    undefined field14_0x296;
    undefined field15_0x297;
    u32 borg8;
    BaseWidget *field17_0x29c;
    WidgetChild8 *unk2a0;
    undefined field19_0x2a4;
    Color32 col0;
    Color32 col1;
    Color32 col2;
    undefined field23_0x2b1;
    undefined field24_0x2b2;
    undefined field25_0x2b3;
    u32 unk2B4;
    u8 contStatus;
    undefined field28_0x2b9;
    undefined field29_0x2ba;
    undefined field30_0x2bb;
    WidgetHandler wHandler;
    void *dataBuffer;
    s32 filenum;
    WidgetContPakData(u16,u16,void *,void *,u32,Color32*,Color32 *,Color32*);
    ~WidgetContPakData();
    u8 Tick();
    Gfx* Render(Gfx*,u16,u16,u16,u16);
    BaseWidget* AFunc();
    BaseWidget* BFunc();
    BaseWidget* UpFunc();
    BaseWidget* DownFunc();
    BaseWidget* LeftFunc();
    BaseWidget* RightFunc();
    BaseWidget* Control(controller_aidyn*);
    void m80086bd0();
    void GetPFSErr();
    void TryRepair();
    void EraseFile();
    void m80086d30();
    BaseWidget* m80086d3c();
    void m80086d78();
    void FreeWidget(BaseWidget*);
    void m80086e08();
    void TestPak2();
    void PfsErrAction();
    void m80086F40();
    void ReadSaveFile();
    void m800871c8();
    void m80087230();
    void CheckContStatus();
    void m800873ac();
    void m800873f0();
    void m80087424();
    void SavingPrompt();
    void m80087548();
    void m8008759c();
    virtual void unk(){};
    virtual u32 ShowSaveFiles(){};
    virtual void LoadSaveFile(){};
    virtual u32 vmE0(BaseWidget*){};
    virtual u32 vmE8();
    virtual u32 vmF0(){};
    virtual u32 WriteSaveFile();
    virtual u32 vm100();
    virtual void NewContPak();
    void PfsErrDevice();
    void CourrputPak();
    void DamagedPak();
    void ConfirmOverwrite(char*);
    void PfsErrBadRead();
    void PfsErrBadPak();
    void CorruptSaveFile(u8);
    void RepairFail();
    void RepairOk();
    void LoadSliders(SaveDatPointers *);
    void ClearScrollMenu();
    void m80087c40();
    void m80087c88();
    void ReadPakPrompt();
    void m80087ec0();
};

class WidgetContPakDataSave:public WidgetContPakData{
    public:
    WidgetContPakDataSave(u16,u16,void*,void*,Color32 *,Color32 *,Color32 *);
    ~WidgetContPakDataSave();
    void unk();
    u32 ShowSaveFiles();
    void LoadSaveFile();
    u32 vmE0(BaseWidget*);
    u32 vmE8();
    u32 vmF0();
    u32 WriteSaveFile();
    u32 vm100();
    void NewContPak();
};
class WidgetContPakDataLoad: public WidgetContPakData{
    public:
    WidgetContPakDataLoad(u16,u16,void*,void*,Color32 *,Color32 *,Color32 *);
    ~WidgetContPakDataLoad();
    void unk();
    u32 ShowSaveFiles();
    void LoadSaveFile();
    u32 vmE0(BaseWidget*);
    u32 vmF0();
};

WidgetText* ContPakTextWidget(char *,void *,u16 );
WidgetText* ContPakTextWidget2(u16 ,char *,void *);
WidgetChild8 * FUN_80088a78(u16 ,char *);
WidgetChild8 *FUN_80088aac(void *,WidgetHandler *,u16 ,char *,u16 );
void open_mempak_menu(u32 ,u32 ,u32 ,u32,u32);
u32 appState_2(Gfx **);
byte appState2_control(void);
void appState2_Tick(Gfx **,u8);
u32 FUN_80088d80();
void make_mempak_menu(short ,short ,undefined4);
u32 FUN_80088e2c(void);

class ContPakWidget:WidgetMenu{
    public:
    u32 field1_0x7c;
    BaseWidget *w80;
    u8 field3_0x84;
    u8 pfserr;
    u8 field5_0x86;
    char field6_0x87;
    u32 field7_0x88;
    WidgetHandler handler;
    u8 contStat;
    undefined field10_0x95;
    undefined field11_0x96;
    undefined field12_0x97;
    ContPakWidget(u32);
    u8 m80088f0c(BaseWidget *);
    void m80088f44();
    BaseWidget* AFunc();
    BaseWidget* BFunc();
    BaseWidget* UpFunc();
    BaseWidget* DownFunc();
    u8 Tick();
    Gfx* Render(Gfx*,u16,u16,u16,u16);
    BaseWidget* Control(controller_aidyn*);
    void ConfirmDelete(BaseWidget*);
    void ErasePakSave(BaseWidget*);
    void m8008937c();
    void m80089384(BaseWidget*);
    void GetPfsErr();
    void ErrSwitch();
    void LoadWindowCheck();
    void PrintMemcardFiles();
    void m800895d8();
    void m800895f4();
    void m80089668();
    void PfsOK();
    void PfsNoPak();
    void PfsNewPak();
    void PfsErr();
    void DeviceErr();
    void FatalErr();
    void m80089978();
    void m80089a1c();
    void m80089a40();
    void m80089a64(u8);
    void m80089b0c(u8);
    void m80089b9c(u8);
    void LoadWindow();
    void PrintFreeSpace();
    void PrintFile(u8 ,char *,char *,u16);
    void PrintBlankFile(u8);
    void m8008a4e0();
    void m8008a554();
    void m8008a698(BaseWidget*);
    void m8008a6dc();
};
BaseWidget * ContPak_DeleteMenu(BaseWidget *,BaseWidget *);
BaseWidget * ContPak_EraseMenu(BaseWidget *,BaseWidget *);
BaseWidget * ContPak_8008a738(BaseWidget *,BaseWidget *);
BaseWidget * ContPak_8008a768(BaseWidget *,BaseWidget *);
BaseWidget * ContPak_8008a790(BaseWidget *,BaseWidget *);
void FUN_8008a7b8(BaseWidget *);
void FUN_8008a848(BaseWidget *);
void FUN_8008a848(BaseWidget *);
BaseWidget * FUN_8008a87c(BaseWidget *,BaseWidget *);
BaseWidget * FUN_8008a8a4(BaseWidget *,BaseWidget *);

WidgetContPakData* contPakDat=NULL;
u16 gContPakDatTimer=0;